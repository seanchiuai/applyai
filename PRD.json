{
    "projectOverview": {
      "productName": "AI Bookmark Manager",
      "description": "A personal bookmark management tool with an AI agent sidebar that helps users organize, retrieve, and interact with their bookmarks through natural conversation. Features intelligent metadata fetching, project-based organization, and conversational search powered by vector embeddings.",
      "targetAudience": "Individual users who save many bookmarks and need an intelligent way to organize and retrieve them quickly"
    },
    "purposeAndGoals": {
      "problemStatement": "People save hundreds of bookmarks but struggle to find them later. Traditional bookmark managers rely on manual tagging and folder organization, which becomes unwieldy at scale. Users often remember vague details about a bookmark but can't find it through traditional search.",
      "solution": "An AI-powered bookmark manager that understands natural language queries and can intelligently retrieve relevant bookmarks. The AI agent has memory of user preferences and can search through bookmarks semantically, not just by exact keyword matches.",
      "keyObjectives": [
        "Enable fast, intuitive bookmark retrieval through conversational AI",
        "Reduce manual organization overhead with automatic metadata fetching",
        "Provide clean, minimal interface focused on speed and efficiency",
        "Support project-based organization for different contexts (work, personal, research)"
      ]
    },
    "userPersonasAndUseCases": {
      "primaryPersona": {
        "description": "Knowledge worker who saves 10-50+ bookmarks per week across multiple projects and interests. Needs quick access to previously saved resources without remembering exact titles or dates.",
        "useCases": [
          "Ask 'Show me React tutorials I saved' and get relevant bookmarks instantly",
          "Find 'that article about TypeScript generics from last month' through natural conversation",
          "Organize work bookmarks separately from personal reading lists",
          "Quickly save interesting links with auto-populated metadata to review later"
        ]
      }
    },
    "techStack": {
      "frontend": {
        "technology": "Next.js 15 with App Router",
        "reasoning": "Modern React framework with server-side rendering, built-in API routes, and excellent developer experience. App Router provides better performance and streaming capabilities.",
        "prosForThisProject": [
          "Server and client components allow optimal rendering strategy",
          "Built-in API routes eliminate need for separate backend",
          "Excellent performance with automatic code splitting",
          "Strong TypeScript support for type safety",
          "Easy deployment to Vercel"
        ],
        "consForThisProject": [
          "App Router has learning curve if unfamiliar",
          "Some features require server-side hosting (can't deploy as static)",
          "Occasional breaking changes between versions"
        ]
      },
      "backend": {
        "technology": "Convex",
        "reasoning": "All-in-one backend platform that provides database, real-time sync, serverless functions, file storage, and built-in vector search - perfect for this use case.",
        "prosForThisProject": [
          "Built-in vector search for AI retrieval (no separate vector DB needed)",
          "Real-time subscriptions for instant UI updates",
          "Type-safe queries with TypeScript",
          "Serverless functions for backend logic",
          "File storage included for images/favicons",
          "Generous free tier for personal projects"
        ],
        "consForThisProject": [
          "Vendor lock-in (harder to migrate later)",
          "Limited at very large scale (50k+ bookmarks)",
          "Fewer community resources compared to PostgreSQL/Firebase"
        ]
      },
      "database": {
        "technology": "Convex (integrated)",
        "reasoning": "Convex provides database, vector search, and real-time sync in one platform - no need for separate database service.",
        "prosForThisProject": [
          "Vector search built-in for semantic bookmark retrieval",
          "Real-time sync keeps UI instantly updated",
          "Simple schema definition with TypeScript",
          "No manual indexing or optimization needed",
          "Automatic backups included"
        ],
        "consForThisProject": [
          "Not traditional SQL (different query patterns)",
          "Limited complex relational queries",
          "Scaling limits for massive datasets"
        ]
      },
      "authentication": {
        "technology": "Clerk",
        "reasoning": "Modern auth solution with excellent Next.js integration, provides secure authentication without building it from scratch.",
        "prosForThisProject": [
          "Drop-in components for sign-in/sign-up UI",
          "Social auth (Google, GitHub) built-in",
          "User management dashboard included",
          "Integrates seamlessly with Next.js middleware",
          "Generous free tier (10k MAU)"
        ],
        "consForThisProject": [
          "Another service to depend on",
          "Costs scale with user growth",
          "Customization limited to their UI components"
        ]
      },
      "hosting": {
        "technology": "Vercel",
        "reasoning": "Optimized for Next.js deployment with zero-config setup, excellent performance, and generous free tier.",
        "prosForThisProject": [
          "One-click deployment from GitHub",
          "Automatic preview deployments for PRs",
          "Global CDN for fast loading worldwide",
          "Built-in analytics and monitoring",
          "Free tier perfect for personal projects"
        ],
        "consForThisProject": [
          "Serverless functions have execution time limits",
          "Bandwidth limits on free tier",
          "Less control than self-hosting"
        ]
      },
      "additionalTools": [
        {
          "category": "UI Components",
          "technology": "shadcn/ui with Tailwind CSS",
          "reasoning": "High-quality, accessible React components that are copy-paste rather than npm install. Full customization control with Tailwind styling."
        },
        {
          "category": "Metadata Fetching",
          "technology": "Unfurl.js (MVP) + Microlink API (specific sites)",
          "reasoning": "Unfurl.js for free metadata extraction from most websites. Microlink API as fallback for complex sites (Instagram, Twitter, etc.) that require specialized scraping."
        },
        {
          "category": "AI Embeddings",
          "technology": "OpenAI Embeddings API (text-embedding-3-small)",
          "reasoning": "Generate vector embeddings for bookmark content to enable semantic search. OpenAI provides reliable, high-quality embeddings at low cost."
        },
        {
          "category": "AI Chat Interface",
          "technology": "OpenAI API (GPT-4o-mini)",
          "reasoning": "Power the conversational AI agent. GPT-4o-mini offers good performance at lower cost than GPT-4, perfect for MVP."
        }
      ]
    },
    "features": {
      "mvpFeatures": [
        {
          "name": "Project and Folder Organization",
          "description": "Hierarchical structure where users create projects (top-level containers) that contain folders and subfolders. Each bookmark belongs to one folder within one project. Users start with a default 'Main' project and can add more as needed.",
          "priority": "must-have",
          "implementation": "Projects table with name and metadata. Folders table with project_id, parent_folder_id (for nesting), and name. Bookmarks table with folder_id reference. UI shows project switcher in sidebar, folder tree navigation within each project."
        },
        {
          "name": "AI Agent with RAG Retrieval and Memory",
          "description": "Conversational AI sidebar that understands natural language queries, searches bookmarks using vector similarity, and responds with helpful answers plus clickable bookmark recommendations. Agent has global memory of user preferences and conversation context.",
          "priority": "must-have",
          "implementation": "Chat interface in sidebar with conversation history. User query → generate embedding → Convex vector search across bookmarks → retrieve top results → send to GPT with context → generate response + bookmark list. Memory stored in Convex as user preferences/context that gets included in AI prompts."
        },
        {
          "name": "Auto-fetching Metadata",
          "description": "When user pastes a URL, automatically fetch and populate title, description, preview image, and favicon. Uses Unfurl.js for most sites with Microlink API fallback for complex sites (planned post-MVP).",
          "priority": "must-have",
          "implementation": "On bookmark create, URL is required field. Trigger Convex action that: 1) Calls Unfurl.js to fetch metadata, 2) Downloads and stores images/favicon in Convex File Storage, 3) Auto-populates form fields (user can edit before saving). Handle failures gracefully with fallback to manual entry."
        }
      ],
      "niceToHaveFeatures": [
        {
          "name": "Project-specific Agent Memory",
          "description": "Agent remembers context and preferences per-project, not just globally. When in 'Work' project, agent knows your work preferences and priorities.",
          "priority": "nice-to-have"
        },
        {
          "name": "Advanced Search Filters",
          "description": "Filter bookmarks by date added, tags, project, or URL domain. Combine with AI search for powerful retrieval.",
          "priority": "nice-to-have"
        },
        {
          "name": "Bookmark Tags",
          "description": "Add multiple tags to bookmarks for flexible categorization beyond folders. Tags work across projects.",
          "priority": "nice-to-have"
        },
        {
          "name": "Bulk Operations",
          "description": "Select multiple bookmarks to move, delete, or organize at once. Useful when reorganizing large collections.",
          "priority": "nice-to-have"
        },
        {
          "name": "Browser Extension",
          "description": "Quick-save bookmarks from any webpage without opening the app. Extension shows current project/folder context.",
          "priority": "nice-to-have"
        },
        {
          "name": "Microlink API Integration",
          "description": "Expand metadata fetching to handle Instagram Reels, Twitter posts, and other complex social media URLs that Unfurl.js cannot handle.",
          "priority": "nice-to-have"
        }
      ],
      "outOfScope": [
        "Sharing bookmarks or folders with other users",
        "Public bookmark collections",
        "Collaborative features or team workspaces",
        "Mobile native apps (web-responsive only for MVP)",
        "Importing bookmarks from browsers (can add post-MVP)",
        "Full-text search within bookmarked page content (only title/description/tags)",
        "Automatic categorization or AI-suggested folders"
      ]
    },
    "technicalArchitecture": {
      "systemDesign": "Client-server architecture with Next.js frontend hosted on Vercel, Convex as unified backend (database + serverless functions + file storage + vector search). Authentication via Clerk. AI features powered by OpenAI APIs. User interacts with UI → Next.js → Convex API → database/AI services → response back to UI. Real-time updates via Convex subscriptions.",
      "dataModels": [
        {
          "modelName": "User",
          "fields": [
            "id (string, Clerk user ID)",
            "email (string)",
            "name (string)",
            "created_at (timestamp)",
            "preferences (object, for AI memory)"
          ]
        },
        {
          "modelName": "Project",
          "fields": [
            "id (string)",
            "user_id (string, foreign key)",
            "name (string)",
            "is_default (boolean)",
            "created_at (timestamp)",
            "updated_at (timestamp)"
          ]
        },
        {
          "modelName": "Folder",
          "fields": [
            "id (string)",
            "project_id (string, foreign key)",
            "parent_folder_id (string, nullable, self-reference)",
            "name (string)",
            "created_at (timestamp)",
            "updated_at (timestamp)"
          ]
        },
        {
          "modelName": "Bookmark",
          "fields": [
            "id (string)",
            "folder_id (string, foreign key)",
            "url (string, required)",
            "title (string, auto-filled, editable)",
            "description (string, auto-filled, editable)",
            "preview_image_url (string, from Convex storage)",
            "favicon_url (string, from Convex storage)",
            "embedding (vector, for semantic search)",
            "created_at (timestamp)",
            "updated_at (timestamp)"
          ]
        },
        {
          "modelName": "ChatMessage",
          "fields": [
            "id (string)",
            "user_id (string, foreign key)",
            "role (string, 'user' or 'assistant')",
            "content (string)",
            "bookmark_references (array of bookmark IDs)",
            "created_at (timestamp)"
          ]
        },
        {
          "modelName": "UserMemory",
          "fields": [
            "id (string)",
            "user_id (string, foreign key)",
            "memory_type (string, 'preference' or 'context')",
            "content (string)",
            "created_at (timestamp)",
            "updated_at (timestamp)"
          ]
        }
      ],
      "apiStructure": "Convex functions organized by domain: 1) bookmarks.ts (create, read, update, delete bookmarks), 2) projects.ts (manage projects), 3) folders.ts (manage folder hierarchy), 4) chat.ts (handle AI conversations), 5) metadata.ts (fetch URL metadata via Unfurl.js), 6) search.ts (vector search and retrieval). All functions use Convex's built-in auth to ensure users only access their own data.",
      "thirdPartyIntegrations": [
        "Clerk - User authentication and management",
        "OpenAI API - Generate embeddings for bookmarks and power AI chat",
        "Unfurl.js - Fetch Open Graph metadata from URLs (npm package, server-side)",
        "Microlink API - Fallback for complex sites (post-MVP)"
      ]
    },
    "uiUxConsiderations": {
      "designApproach": "Minimal, fast, keyboard-friendly interface. Sidebar navigation on left with projects/folders. Main content area shows bookmark grid/list. AI chat sidebar on right (collapsible with keyboard shortcut). Focus on speed and reducing friction - every interaction should feel instant.",
      "keyUserFlows": [
        "Add bookmark: User pastes URL → metadata auto-fetches → user reviews/edits → saves to current folder",
        "Find bookmark via AI: User opens chat sidebar → types question → AI responds with answer + clickable bookmark cards",
        "Organize bookmarks: User drags bookmark to different folder, or uses context menu to move/delete",
        "Switch projects: User clicks project switcher → selects project → folder tree updates to show that project's folders"
      ],
      "styleGuidelines": "Clean, modern design with shadcn/ui components. Neutral color palette (grays, whites) with subtle accent color. Ample whitespace, clear typography. Bookmark cards show favicon, title, description, and preview image thumbnail. AI chat uses message bubbles with bookmark cards embedded inline. Fast animations (< 200ms) for interactions."
    },
    "retrievalStrategy": {
      "approach": "Vector search only for MVP",
      "reasoning": "With less than 1000 bookmarks total and less than 500 per project, vector search alone provides excellent semantic matching without added complexity of hybrid search. Convex has built-in vector search, making implementation straightforward.",
      "implementation": "When bookmark is created, generate embedding using OpenAI text-embedding-3-small model from title + description + URL. Store embedding in Convex. When user asks question, generate query embedding, use Convex vector search to find top 5-10 most similar bookmarks, pass results to GPT for response generation.",
      "futureEnhancements": "If retrieval quality is insufficient, can add keyword search and simple result fusion. For much larger collections (10k+ bookmarks), consider hybrid search with reranker."
    },
    "metadataFetchingStrategy": {
      "mvpApproach": "Unfurl.js for all URLs",
      "reasoning": "Free, open-source, handles most websites with Open Graph/Twitter Card metadata. Sufficient for MVP to validate product. Some sites (Instagram, complex SPAs) will fail gracefully to manual entry.",
      "implementation": "Convex action fetches URL via Unfurl.js, extracts title/description/image/favicon, downloads images to Convex File Storage, returns metadata to frontend for user review before saving.",
      "postMvpUpgrade": "Identify specific problematic site patterns (Instagram, Twitter, LinkedIn). Use Microlink API for those domains only. Check URL domain → if in problematic list, use Microlink, otherwise use Unfurl.js. Microlink free tier (100 req/day) sufficient for personal use.",
      "fallbackHandling": "If metadata fetch fails (timeout, blocked, error), populate form with URL as title, empty description, no images. User can manually fill in or save as-is."
    },
    "mvpSuccessCriteria": {
      "functionalCriteria": [
        "User can create projects and nested folders",
        "User can add bookmark with auto-fetched metadata",
        "User can edit bookmark fields (except created_at, images)",
        "User can delete bookmarks and folders",
        "AI agent returns relevant bookmarks for natural language queries",
        "AI agent provides helpful short responses with context",
        "Chat interface shows clickable bookmark cards",
        "All bookmark operations feel snappy (< 500ms perceived latency)"
      ],
      "userExperienceCriteria": [
        "Adding a bookmark takes < 10 seconds",
        "Finding a bookmark via AI takes < 5 seconds",
        "Interface feels fast and responsive",
        "Metadata fetching succeeds for 80%+ of common websites",
        "AI responses are relevant and helpful"
      ]
    },
    "developmentPhases": {
      "phase1": "Setup and Authentication (Week 1)",
      "phase1Tasks": [
        "Initialize Next.js 15 project with TypeScript",
        "Set up Convex backend with schema",
        "Integrate Clerk authentication",
        "Deploy to Vercel",
        "Basic layout with sidebar navigation"
      ],
      "phase2": "Core Bookmark Management (Week 2)",
      "phase2Tasks": [
        "Implement Project and Folder CRUD",
        "Implement Bookmark CRUD",
        "Build metadata fetching with Unfurl.js",
        "Image storage in Convex",
        "Folder tree navigation UI"
      ],
      "phase3": "AI Agent and Search (Week 3)",
      "phase3Tasks": [
        "Implement embedding generation on bookmark create",
        "Build vector search endpoint",
        "Create chat UI with sidebar",
        "Integrate OpenAI for chat responses",
        "Display bookmark cards in chat",
        "Basic user memory storage"
      ],
      "phase4": "Polish and Testing (Week 4)",
      "phase4Tasks": [
        "Keyboard shortcuts for common actions",
        "Loading states and error handling",
        "Responsive design tweaks",
        "Performance optimization",
        "User testing and bug fixes"
      ]
    },
    "openQuestions": {
      "questions": [
        "Should bookmarks have tags in MVP, or save for v2?",
        "What keyboard shortcuts are most important? (e.g., Cmd+K for quick add, Cmd+J for chat)",
        "Should folders be required, or allow bookmarks at project root level?",
        "How many recent chat messages should AI remember as context? (last 5, 10, 20?)",
        "Should user be able to edit/delete chat messages?",
        "Default project name? ('Main', 'Personal', 'Bookmarks'?)"
      ]
    }
  }